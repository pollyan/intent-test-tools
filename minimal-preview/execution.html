<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>执行控制台 - Intent Test Framework</title>
    <link rel="stylesheet" href="assets/css/minimal-style.css">
</head>
<body>
    <!-- 顶部导航 -->
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-brand">Intent Test Framework</div>
            <div class="nav-links">
                <a href="dashboard.html" class="nav-link">仪表板</a>
                <a href="testcases.html" class="nav-link">测试用例</a>
                <a href="execution.html" class="nav-link active">执行控制台</a>
                <a href="reports.html" class="nav-link">报告</a>
            </div>
            <div class="nav-user">用户</div>
        </div>
    </nav>

    <!-- 主内容 -->
    <main class="main-container">
        <!-- 页面标题 -->
        <div class="page-header">
            <h1 class="page-title">执行控制台</h1>
            <p class="page-subtitle">测试用例执行和实时监控</p>
        </div>

        <!-- 主要内容区域 -->
        <div class="grid grid-cols-2 gap-3">
            <!-- 左侧：执行控制 -->
            <div class="card">
                <h3 class="card-title">执行控制</h3>
                <p class="card-subtitle">测试用例选择和执行配置</p>
                
                <div class="card-content">
                    <!-- 测试用例选择 -->
                    <div class="form-group">
                        <label class="form-label">选择测试用例</label>
                        <select class="form-select">
                            <option value="">请选择测试用例</option>
                            <option value="1">用户登录功能测试</option>
                            <option value="2">商品搜索功能测试</option>
                            <option value="3">购物车结算测试</option>
                            <option value="4">用户注册功能测试</option>
                            <option value="5">支付功能测试</option>
                        </select>
                    </div>

                    <!-- 执行配置 -->
                    <div class="grid grid-cols-2 gap-2">
                        <div class="form-group">
                            <label class="form-label">执行模式</label>
                            <select class="form-select">
                                <option value="headless">无头模式</option>
                                <option value="normal">正常模式</option>
                                <option value="debug">调试模式</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">执行类型</label>
                            <select class="form-select" disabled>
                                <option value="local">本地代理执行</option>
                            </select>
                        </div>
                    </div>

                    <!-- 执行按钮 -->
                    <div class="flex gap-2 mb-3">
                        <button class="btn btn-primary w-full">开始执行</button>
                        <button class="btn btn-ghost w-full" disabled>停止执行</button>
                    </div>

                    <!-- 状态信息 -->
                    <div class="card" style="background: #f8f8f8; border: 1px solid #e8e8e8;">
                        <div class="card-title text-base">状态信息</div>
                        <div class="list" style="background: transparent; border: none;">
                            <div class="list-item" style="background: transparent; border: none;">
                                <div class="list-item-content">
                                    <div class="list-item-title">本地代理服务器</div>
                                    <div class="list-item-subtitle">localhost:3001</div>
                                </div>
                                <div class="status status-success"></div>
                            </div>
                            <div class="list-item" style="background: transparent; border: none;">
                                <div class="list-item-content">
                                    <div class="list-item-title">执行状态</div>
                                    <div class="list-item-subtitle">等待中</div>
                                </div>
                                <div class="status status-inactive"></div>
                            </div>
                            <div class="list-item" style="background: transparent; border: none;">
                                <div class="list-item-content">
                                    <div class="list-item-title">执行进度</div>
                                    <div class="list-item-subtitle">0/0</div>
                                </div>
                                <div class="progress" style="width: 60px; margin: 0;">
                                    <div class="progress-bar" style="width: 0%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右侧：实时信息 -->
            <div class="flex flex-column gap-2">
                <!-- 执行日志 -->
                <div class="card" style="flex: 1;">
                    <h3 class="card-title">执行日志</h3>
                    <p class="card-subtitle">实时执行日志输出</p>
                    <div class="log-container" style="height: 250px;">
                        <div class="log-entry">
                            <span class="log-entry-time">[14:32:15]</span>
                            本地代理执行控制台已就绪
                        </div>
                        <div class="log-entry">
                            <span class="log-entry-time">[14:32:15]</span>
                            <span class="log-entry-warning">注意：此控制台仅支持本地代理执行模式</span>
                        </div>
                        <div class="log-entry">
                            <span class="log-entry-time">[14:32:15]</span>
                            请先在您的电脑上下载并启动本地代理服务器(端口3001)
                        </div>
                        <div class="log-entry">
                            <span class="log-entry-time">[14:32:16]</span>
                            跳过服务器WebSocket连接，仅使用本地代理连接
                        </div>
                        <div class="log-entry">
                            <span class="log-entry-time">[14:32:16]</span>
                            <span class="log-entry-success">本地代理连接成功</span>
                        </div>
                    </div>
                </div>

                <!-- 当前截图 -->
                <div class="card">
                    <h3 class="card-title">当前截图</h3>
                    <p class="card-subtitle">当前执行步骤的截图</p>
                    <div class="card-content">
                        <div class="empty-state" style="padding: 40px 20px;">
                            <div class="empty-state-icon">🖼️</div>
                            <div class="empty-state-text">执行开始后将显示截图</div>
                        </div>
                    </div>
                </div>

                <!-- 步骤截图历史 -->
                <div class="card">
                    <h3 class="card-title">步骤截图历史</h3>
                    <p class="card-subtitle">执行过程中的截图记录</p>
                    <div class="card-content">
                        <div class="empty-state" style="padding: 30px 20px;">
                            <div class="empty-state-icon">📸</div>
                            <div class="empty-state-text">暂无截图历史</div>
                            <div class="empty-state-subtext">执行测试后将显示截图</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 最近执行记录 -->
        <div class="card mt-4">
            <h3 class="card-title">最近执行记录</h3>
            <p class="card-subtitle">最近的测试执行历史</p>
            
            <div class="list">
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">用户登录功能测试</div>
                        <div class="list-item-subtitle">2024-01-15 14:32:15 • 无头模式 • 本地代理执行</div>
                        <div class="list-item-meta">
                            <span class="text-gray-600">耗时 0.8s</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">5个步骤</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">全部成功</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-1">
                        <span class="text-sm text-gray-500">2分钟前</span>
                        <div class="status status-success"></div>
                    </div>
                </div>

                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">商品搜索功能测试</div>
                        <div class="list-item-subtitle">2024-01-15 14:30:18 • 无头模式 • 本地代理执行</div>
                        <div class="list-item-meta">
                            <span class="text-gray-600">耗时 1.2s</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">3个步骤</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">全部成功</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-1">
                        <span class="text-sm text-gray-500">5分钟前</span>
                        <div class="status status-success"></div>
                    </div>
                </div>

                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">购物车结算测试</div>
                        <div class="list-item-subtitle">2024-01-15 14:28:45 • 无头模式 • 本地代理执行</div>
                        <div class="list-item-meta">
                            <span class="text-gray-600">耗时 0.5s</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">7个步骤</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">步骤3失败</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-1">
                        <span class="text-sm text-gray-500">8分钟前</span>
                        <div class="status status-error"></div>
                    </div>
                </div>

                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">用户注册功能测试</div>
                        <div class="list-item-subtitle">2024-01-15 14:25:12 • 正常模式 • 本地代理执行</div>
                        <div class="list-item-meta">
                            <span class="text-gray-600">耗时 1.5s</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">4个步骤</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">全部成功</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-1">
                        <span class="text-sm text-gray-500">12分钟前</span>
                        <div class="status status-success"></div>
                    </div>
                </div>

                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-title">支付功能测试</div>
                        <div class="list-item-subtitle">2024-01-15 14:22:33 • 调试模式 • 本地代理执行</div>
                        <div class="list-item-meta">
                            <span class="text-gray-600">耗时 2.3s</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">6个步骤</span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">步骤5失败</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-1">
                        <span class="text-sm text-gray-500">15分钟前</span>
                        <div class="status status-error"></div>
                    </div>
                </div>
            </div>

            <!-- 分页 -->
            <div class="divider"></div>
            <div class="flex items-center justify-between">
                <div class="text-sm text-gray-600">
                    显示最近 5 条执行记录
                </div>
                <div class="flex items-center gap-1">
                    <button class="btn btn-small btn-ghost">查看全部</button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // 简单的交互效果
        document.addEventListener('DOMContentLoaded', function() {
            const startBtn = document.querySelector('.btn-primary');
            const stopBtn = document.querySelector('.btn-ghost[disabled]');
            const statusItems = document.querySelectorAll('.status');
            
            startBtn.addEventListener('click', function() {
                // 模拟开始执行
                startBtn.disabled = true;
                stopBtn.disabled = false;
                startBtn.textContent = '执行中...';
                
                // 更新状态
                statusItems[1].className = 'status status-warning';
                
                // 模拟执行完成
                setTimeout(() => {
                    startBtn.disabled = false;
                    stopBtn.disabled = true;
                    startBtn.textContent = '开始执行';
                    statusItems[1].className = 'status status-success';
                }, 3000);
            });
        });
    </script>
</body>
</html>